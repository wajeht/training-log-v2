<!-- delete comment confirmation -->
<%- include('../auth/delete-comment-confirmation-modal.ejs') %>

<div id="video_comments">
  <% for (const comment of comments) { %>
  <div id="comment-id<%= comment.id %>" class="card shadow-sm mb-3">
    <div class="card-body">
      <div>
        <div class="d-flex justify-content-between">
          <!-- title -->
          <a
            class="card-title text-decoration-none link-dark"
            href="/users/<%= comment.username  %>"
            ><h5><%= comment.username %></h5></a
          >

          <!-- trash can -->
          <% if (isAuthenticated && videoDetails.user_id == user.id) { %>

          <!-- video_user_id -->
          <input
            type="hidden"
            id="vide_user_id"
            name="vide_user_id"
            value="<%= videoDetails.user_id %>"
          />

          <!-- session_user_id -->
          <input
            type="hidden"
            id="session_user_id"
            name="session_user_id"
            value="<%= user.id %>"
          />

          <!-- delete button -->
          <a
            href="#"
            onclick="setCommentIdToLocalStorage(this)"
            style="border: none; background-color: none"
            data-bs-toggle="modal"
            data-bs-target="#deleteConfirmationComment"
            id="delete-comment-button"
            class="link-secondary text-decoration-none"
          >
            <i class="bi bi-trash"></i>
          </a>
          <% } %>
        </div>

        <p class="card-text"><%= comment.comment %></p>
        <p class="card-text">
          <small class="text-muted"
            ><%= comment.date.toLocaleDateString() %></small
          >
        </p>
      </div>
    </div>
  </div>
  <% } %>
</div>
